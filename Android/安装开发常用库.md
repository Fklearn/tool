# 工具库
- 1.[AndroidUtilCode](https://github.com/Blankj/AndroidUtilCode)
# Toast
- 1.https://github.com/GrenderG/Toasty
![image](https://user-images.githubusercontent.com/27600008/132111785-d379a0c7-e01a-4730-ab95-03a1dfd2f294.png)
```
implementation 'com.github.GrenderG:Toasty:1.5.0'
```
# Webdav
- 1.https://github.com/thegrizzlylabs/sardine-android
```
    //需要替换okhttp3版本，以去除kotlin库
    implementation('com.thegrizzlylabs.sardine-android:sardine-android:0.5'){
        exclude group: 'com.squareup.okhttp3'
    }
    implementation 'com.squareup.okhttp3:okhttp:3.8.0'
```
# ListView
- 1.https://github.com/hongyangAndroid/baseAdapter
```
implementation 'com.zhy:base-rvadapter:3.0.3'
```
基于该代码封装了一个helper类
```java
package xxxxx;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.view.Gravity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.LinearLayout;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.zhy.adapter.recyclerview.CommonAdapter;
import com.zhy.adapter.recyclerview.MultiItemTypeAdapter;
import com.zhy.adapter.recyclerview.base.ViewHolder;

import java.lang.ref.WeakReference;
import java.util.List;

public class ListViewHelper<T>  {
    public static final String TAG = "ListViewHelper";
    private WeakReference<Activity> activityWeakReference;
    private RecyclerView recyclerView;
    private CommonAdapter<T> commonAdapter;
    private AlertDialog alertDialog;
    private LinearLayout root;
    private List<T> lists;
    private Callback<T> callback;

    public interface Callback<T> {
        void onValue(T item);
    }

    ListViewHelper(Activity activity,String title) {
        activityWeakReference = new WeakReference<>(activity);
        recyclerView = new RecyclerView(activity);
        recyclerView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,LinearLayout.LayoutParams.MATCH_PARENT));
        recyclerView.setLayoutManager(new LinearLayoutManager(activity));
        root=new LinearLayout(activity);
        root.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,LinearLayout.LayoutParams.MATCH_PARENT));
        root.setGravity(Gravity.CENTER);
        root.setOrientation(LinearLayout.VERTICAL);
        root.addView(recyclerView);
        alertDialog=new AlertDialog.Builder(activity).setTitle(title).setView(root).create();
    }


    public ListViewHelper watch(List<T> list) {
        this.lists=list;
        commonAdapter = new CommonAdapter<T>(activityWeakReference.get(), R.layout.list_item, list) {
            @Override
            protected void convert(ViewHolder holder, T item, int position) {
                TextView title=holder.getView(R.id.title);
                title.setText(getTitle(item));
                title.setOnClickListener(v -> {
                    if(callback!=null)callback.onValue(item);
                    alertDialog.dismiss();
                });
            }
        };
        recyclerView.setAdapter(commonAdapter);
        return this;
    }

    public ListViewHelper callback(Callback<T> callback) {
        this.callback=callback;
        return this;
    }

    public void show() {
        alertDialog.show();
    }
    public String getTitle(T item){
        return item.toString();
    }

}

```
调用例子
```java
 ListViewHelper listViewHelper= new ListViewHelper<BluetoothBean>(getActivity(),"选择设备"){
                                @SuppressLint("StaticFieldLeak")
                                @Override
                                public String getTitle(BluetoothBean item) {
                                    if(TextUtils.isEmpty(item.name)){
                                        return item.mac;
                                    }
                                    return String.format("%s(%s)",item.mac,item.name);
                                }
                            };
                            listViewHelper.watch(beans).callback((ListViewHelper.Callback<BluetoothBean>) item -> {
                                if(getPreferenceManager().getSharedPreferences().edit().putString(prefHexUpload,ByteUtil.toHexString(item.raw)).commit()){
                                    ToastHelper.success("已采集选择的设备数据");
                                }

                            }).show();
```
# permission
- 1.https://github.com/getActivity/XXPermissions
```
implementation 'com.github.getActivity:XXPermissions:12.0'
```
```
        XXPermissions.with(this).permission(Permission.ACCESS_FINE_LOCATION)
                .permission(Permission.ACCESS_BACKGROUND_LOCATION)
                .request(new OnPermissionCallback() {
                    @Override
                    public void onGranted(List<String> permissions, boolean all) {
                        if(all){
                            init();
                        }else {
                            ToastHelper.error("获取部分权限成功，但部分权限未正常授予");
                        }
                    }

                    @Override
                    public void onDenied(List<String> permissions, boolean never) {
                        if (never) {
                            ToastHelper.error("被永久拒绝授权，请手动授予位置权限权限");
                            // 如果是被永久拒绝就跳转到应用权限系统设置页面
                            XXPermissions.startPermissionActivity(SplashActivity.this, permissions);
                        } else {
                            ToastHelper.error("获取位置权限失败");
                        }
                    }
                });
```
# Bluetooth
- 1.https://github.com/AltBeacon/android-beacon-library
```
implementation 'org.altbeacon:android-beacon-library:2.19'
```
